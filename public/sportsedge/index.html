<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SportsEdge • Live Dashboard (UI v21)</title>
<style>
  :root{
    --bg:#0b1119; --panel:#101827; --panel2:#0e1726; --ink:#eaf2ff; --sub:#9ab0cc; --muted:#7e8ea6;
    --green:#3ce6a5; --yellow:#ffd166; --red:#ff6b6b; --accent:#4fd1ff; --border:#1a2a44;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:15px/1.55 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto}
  .wrap{max-width:1200px;margin:32px auto;padding:0 18px}
  header{display:flex;align-items:center;gap:14px;margin-bottom:14px}
  .logo{width:26px;height:26px;border-radius:50%;
    background:conic-gradient(from 40deg,#40e0a6,#3ea3ff); box-shadow:0 0 0 3px #0d1522}
  h1{font-size:26px;margin:0}
  .note{color:var(--sub);font-size:13px;margin-top:2px}
  .tabbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:16px}
  .tab{background:var(--panel2);border:1px solid var(--border);border-radius:10px;padding:8px 12px;
       cursor:pointer;color:var(--ink);opacity:.85}
  .tab.active{outline:2px solid var(--accent);opacity:1}
  .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:14px}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:16px}
  .head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
  .title{font-weight:700;font-size:18px}
  .updated{color:var(--muted);font-size:12px}
  .row{display:grid;grid-template-columns:220px 1fr 130px 110px;align-items:center;
       gap:10px;background:#0f1a2c;border:1px solid var(--border);border-radius:10px;padding:10px}
  @media (max-width:820px){.row{grid-template-columns:1fr}}
  .teams{font-weight:600}
  .bar{height:8px;background:#0b1527;border-radius:6px;overflow:hidden}
  .bar i{display:block;height:100%}
  .pill{padding:4px 8px;border-radius:999px;border:1px solid var(--border);font-size:12px;text-align:center}
  .g{color:var(--green);border-color:rgba(60,230,165,.45)}
  .y{color:var(--yellow);border-color:rgba(255,209,102,.45)}
  .r{color:var(--red);border-color:rgba(255,107,107,.45)}
  .sub{color:var(--muted);font-size:12px}
  .empty{color:var(--muted);background:#0f1929;border:1px dashed var(--border);border-radius:10px;padding:16px;text-align:center}
  footer{margin:22px 4px 36px;color:var(--muted);font-size:12px}
  .badge{font-weight:700;color:#77ffc9}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="logo"></div>
    <div>
      <h1>SportsEdge • Live Dashboard <span class="badge">UI v21</span></h1>
      <div class="note">Auto-refreshing every 60s • Colors: <b style="color:var(--green)">Green</b> /
        <b style="color:var(--yellow)">Yellow</b> / <b style="color:var(--red)">Red</b></div>
    </div>
  </header>

  <div class="tabbar" id="tabs">
    <div class="tab active" data-league="nfl">NFL</div>
    <div class="tab" data-league="nba">NBA</div>
    <div class="tab" data-league="mlb">MLB</div>
    <div class="tab" data-league="ufc">UFC</div>
  </div>

  <div class="grid" id="grid"></div>

  <footer>© SportsEdge — entertainment/testing only</footer>
</div>

<script>
const leagues = ["nfl","nba","mlb","ufc"];
let current = "nfl";
const grid = document.getElementById("grid");
const tabs = document.getElementById("tabs");

function color(c){
  if(c==="green") return getComputedStyle(document.documentElement).getPropertyValue("--green");
  if(c==="yellow") return getComputedStyle(document.documentElement).getPropertyValue("--yellow");
  return getComputedStyle(document.documentElement).getPropertyValue("--red");
}
function pctWidth(edge){
  const abs = Math.abs(Number(edge||0));
  return Math.min(100, abs*8); // tune visual impact
}
function h(el,cls,txt){const e=document.createElement(el); if(cls) e.className=cls; if(txt!=null) e.innerHTML=txt; return e;}

async function loadLeague(lg){
  current = lg;
  for(const t of tabs.children){ t.classList.toggle("active", t.dataset.league===lg); }
  grid.innerHTML = "";

  const card = h("div","card");
  const head = h("div","head");
  head.append(h("div","title", lg.toUpperCase()+" • This Week"));
  const upd = h("div","updated","loading…"); head.append(upd);
  card.append(head);

  const list = h("div"); card.append(list);
  grid.append(card);

  const url = ./data/\/current.json?t=\;
  try{
    const r = await fetch(url);
    if(!r.ok) throw new Error(r.status);
    const j = await r.json();

    upd.textContent = Updated   •  Record: G  • Y  • R ;

    if(!Array.isArray(j.games) || j.games.length===0){
      list.append(h("div","empty","No picks yet for this league."));
      return;
    }

    j.games.forEach(g=>{
      const row = h("div","row");
      row.append(h("div","teams", ${g.away||""} @ ));

      const bar = h("div","bar");
      const i = h("i");
      i.style.width = pctWidth(g.edge)+"%";
      i.style.background = color(g.color||"yellow");
      bar.append(i);
      row.append(bar);

      const rec = h("div", "pill " + (g.color==="green"?"g":g.color==="yellow"?"y":"r"), g.recommendation||"—");
      row.append(rec);

      const right = h("div","sub",
        ${g.market||""} • line  • model <br>);
      row.append(right);

      list.append(row);
    });
  }catch(e){
    upd.textContent = "Error loading data";
    list.append(h("div","empty",Failed to load <code>\</code>));
  }
}

tabs.addEventListener("click", (ev)=>{
  const t = ev.target.closest(".tab");
  if(!t) return;
  loadLeague(t.dataset.league);
});

loadLeague(current);
setInterval(()=>loadLeague(current), 60000); // auto-refresh
</script>
</body>
</html>
